(window["webpackJsonppogoda-app"]=window["webpackJsonppogoda-app"]||[]).push([[0],{11:function(e,t,a){e.exports=a(20)},16:function(e,t,a){},17:function(e,t,a){},20:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),i=a(3),r=a.n(i),s=(a(16),a(4)),o=a(5),l=a(8),u=a(10),d=(a(17),a(6)),m=a(9),f=function(e){var t=e.dayName,a=e.icon,n=e.desc,i=e.temp,r=e.press;return c.a.createElement("div",{className:"daily-forecast"},c.a.createElement("p",{className:"day-name"},t),c.a.createElement("img",{className:"icon",src:"http://openweathermap.org/img/wn/".concat(a,".png"),alt:"icon unavailable"}),c.a.createElement("p",{className:"day-description"},n),c.a.createElement("p",{className:"day-temperature"},i,"\xb0C"),c.a.createElement("p",{className:"day-pressure"},r," hPa"))},y=function(e){var t=Object(n.useState)(),a=Object(m.a)(t,2),i=a[0],r=a[1];return Object(n.useEffect)((function(){!function(){if(e.forecast){var t=["Niedziela","Poniedzia\u0142ek","Wtorek","\u015aroda","Czwartek","Pi\u0105tek","Sobota"],a=t.indexOf(e.day)-1,n=e.forecast.daily.map((function(e){return a===t.length-1?a=0:a++,c.a.createElement(f,{key:e.dt,dayName:t[a],icon:e.weather[0].icon,desc:e.weather[0].description,temp:e.temp.day,press:e.pressure})}));r(n)}}()}),[e.sunset]),Object(n.useEffect)((function(){}),[]),c.a.createElement("div",{className:"forecast"},c.a.createElement("div",{className:"forecast-container"},i))},h=a(7),p=a.n(h),g=function(e){var t=(e.sunset-e.sunrise)/3600,a=Math.floor((e.sunset-e.sunrise)/3600),n=Math.floor(60*(t-a)),i=(new Date).toLocaleDateString(),r=new Date(1e3*e.sunrise).toLocaleTimeString(),s=new Date(1e3*e.sunset).toLocaleTimeString();return c.a.createElement("div",{className:"info"},c.a.createElement("div",{className:"info-wrapper"},c.a.createElement("h1",{className:"info-city"},e.city),c.a.createElement("p",{className:"info-day"},e.day),c.a.createElement("p",{className:"info-clock"}," ",e.hour),c.a.createElement("p",{className:"info-date"},i),c.a.createElement("p",{className:"info-sunrise"},"Wsch\xf3d s\u0142o\u0144ca: ",r),c.a.createElement("p",{className:"info-sunset"},"Zach\xf3d s\u0142o\u0144ca: ",s),c.a.createElement("p",{className:"info-day-length"},"D\u0142ugo\u015b\u0107 dnia: ",a," godzin i ",n," minut.")),c.a.createElement("div",{className:"sun-container"},c.a.createElement("img",{className:"sun",src:p.a,alt:"sun"}),c.a.createElement("i",{className:"fas fa-moon moon"}),c.a.createElement("div",{className:"horizon"})))},k=function(e){var t=function(t){e.selectCity(t.target.id)};return c.a.createElement("div",{className:"select-city"},c.a.createElement("p",{className:"hint"},"U\u017cyj geolokalizacji, albo wybierz jedno z miast:"),c.a.createElement("div",{className:"local-city"},c.a.createElement("button",{className:"local-button",onClick:function(){return e.getLocalWeather()}},c.a.createElement("i",{class:"fas fa-search-location"}))),c.a.createElement("div",{className:"cities-table"},c.a.createElement("div",{className:"city",onClick:function(e){return t(e)},id:"Krak\xf3w"},"Krak\xf3w"),c.a.createElement("div",{className:"city",onClick:function(e){return t(e)},id:"Warszawa"},"Warszawa"),c.a.createElement("div",{className:"city",onClick:function(e){return t(e)},id:"Rzesz\xf3w"},"Rzesz\xf3w"),c.a.createElement("div",{className:"city",onClick:function(e){return t(e)},id:"Gda\u0144sk"},"Gda\u0144sk"),c.a.createElement("div",{className:"city",onClick:function(e){return t(e)},id:"Wroc\u0142aw"},"Wroc\u0142aw"),c.a.createElement("div",{className:"city",onClick:function(e){return t(e)},id:"Pozna\u0144"},"Pozna\u0144"),c.a.createElement("div",{className:"city",onClick:function(e){return t(e)},id:"Lublin"},"Lublin"),c.a.createElement("div",{className:"city",onClick:function(e){return t(e)},id:"\u0141\xf3d\u017a"},"\u0141\xf3d\u017a"),c.a.createElement("div",{className:"city",onClick:function(e){return t(e)},id:"Katowice"},"Katowice")))},v="efa2ef11f117f7485b2fca8e87a3a2f5",E=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).state={data:new Date,hour:null,day:null,sunrise:0,sunset:0,city:"Krak\xf3w",forecast:null,lon:19.57,lat:50.03,currentTime:null,cityPending:null},e.onClickSelectCity=function(t){var a,n,c=document.querySelector(".info-wrapper"),i=document.querySelector(".forecast-container");switch(t){case"Krak\xf3w":a=50.03,n=19.57;break;case"Warszawa":a=52.12,n=21.02;break;case"Rzesz\xf3w":a=50,n=22;break;case"Pozna\u0144":a=52.25,n=16.55;break;case"Wroc\u0142aw":a=51.07,n=17.02;break;case"Gda\u0144sk":a=54.22,n=18.38;break;case"\u0141\xf3d\u017a":a=51.47,n=19.28;break;case"Katowice":a=50,n=19.01;break;case"Lublin":a=51.14,n=22.34;break;default:console.log("co\u015b nie dzia\u0142a")}e.setState({cityPending:t,lat:a,lon:n}),c.classList.add("hide"),i.classList.add("hide")},e.getWeather=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:19.57,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50.03,n="https://api.openweathermap.org/data/2.5/onecall?lat=".concat(a,"&lon=").concat(t,"&exclude=hourly,minutely&appid=").concat(v,"&units=metric&lang=pl"),c=document.querySelector(".info-wrapper"),i=document.querySelector(".forecast-container");fetch(n).then((function(e){if(e.ok)return e;throw Error("Nie uda\u0142o si\u0119 pobra\u0107 danych!")})).then((function(e){return e.json()})).then((function(t){c.classList.remove("hide"),i.classList.remove("hide"),e.setState({forecast:t,currentTime:t.current.dt,sunset:t.current.sunset,sunrise:t.current.sunrise})}))},e.getGeolocation=function(t){var a=t.coords.latitude,n=t.coords.longitude,c=document.querySelector(".info-wrapper"),i=document.querySelector(".forecast-container");e.setState({lat:a,lon:n,cityPending:"u Ciebie :)"}),c.classList.add("hide"),i.classList.add("hide")},e.getLocalWeather=function(){navigator.geolocation.getCurrentPosition(e.getGeolocation)},e.getCurrentTime=function(){e.setState({hour:(new Date).toLocaleTimeString()})},e.getCurrentDay=function(){var t=e.state.data.getDay();e.setState({day:["Niedziela","Poniedzia\u0142ek","Wtorek","\u015aroda","Czwartek","Pi\u0105tek","Sobota"][t]})},e.calculateSunPosition=function(){var t=document.querySelector(".sun-container"),a=document.querySelector(".sun"),n=document.querySelector(".horizon"),c=document.querySelector(".moon"),i=(e.state.sunset-e.state.sunrise)/3600,r=(e.state.currentTime-e.state.sunrise)/3600/i*t.clientWidth,s=-4*t.clientHeight/(t.clientWidth*t.clientWidth)*r*(r-t.clientWidth),o=Math.floor(r),l=t.clientHeight-Math.floor(s);o<t.clientWidth&&l<t.clientHeight?(a.style.left="".concat(o,"px"),a.style.top="".concat(l,"px"),c.style.display="none",a.style.display="unset",t.style.backgroundColor="rgb(202, 226, 247)",n.style.backgroundColor="rgb(123, 201, 134)"):(a.style.display="none",c.style.display="unset",t.style.backgroundColor="rgba(104, 144, 245, 1)",n.style.backgroundColor="rgba(209, 218, 241, 1)")},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=document.querySelector(".info-wrapper");this.getCurrentDay(),Object(d.setInterval)(this.getCurrentTime,1e3),this.getWeather(),t.addEventListener("transitionend",(function(){e.getWeather(e.state.lon,e.state.lat),e.setState({city:e.state.cityPending})}))}},{key:"componentDidUpdate",value:function(){this.calculateSunPosition()}},{key:"render",value:function(){return c.a.createElement("div",{className:"App"},c.a.createElement(g,{city:this.state.city,day:this.state.day,hour:this.state.hour,sunset:this.state.sunset,sunrise:this.state.sunrise}),c.a.createElement(k,{selectCity:this.onClickSelectCity,getLocalWeather:this.getLocalWeather}),c.a.createElement(y,{getWeather:this.getWeather,forecast:this.state.forecast,city:this.state.city,hide:this.onClickHide,day:this.state.day,sunset:this.state.sunset}))}}]),a}(c.a.Component);r.a.render(c.a.createElement(E,null),document.getElementById("root"))},7:function(e,t,a){e.exports=a.p+"static/media/sun.e2600015.svg"}},[[11,1,2]]]);
//# sourceMappingURL=main.1ef0d59b.chunk.js.map